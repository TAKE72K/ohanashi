<!DOCTYPE html><!--*- encoding: UTF-8 -*-->
<html lang=ja ng-app="unko">
 <head>
  <meta charset=UTF-8>
  <title>おはなしを作る</title>
  <meta name="viewport" content="width=device-width">
  <link rel=stylesheet href=bootstrap/css/bootstrap.min.css>
  <link rel=stylesheet href=hoge.css>
  <script src="lib/angular.min.js"></script>
  <script src="lib/angular-resource.min.js"></script>
  <script src="hoge.js"></script>
 </head>
 <body ng-controller=Ctrl>
  <h1>おはなしを作る</h1>

  <div class="container">
   <section id="select-idol">
    <h2>アイドルを選ぶ</h2>

    <div class="form-inline">
    <span class="radio">
     <label class="radio-inline"><input name=type type=radio ng-model="search.type" value="">All</label>
     <label><input name=type type=radio ng-model="search.type" value="vo">Vo</label>
     <label><input name=type type=radio ng-model="search.type" value="da">Da</label>
     <label><input name=type type=radio ng-model="search.type" value="vi">Vi</label>
     <label><input name=type type=radio ng-model="search.type" value="ex">Ex</label>
    </span>
    <label>
     <input type=search size=20 ng-model="searchText" placeholder="にかいどう" class="form-control">
    </label>
   </div>

    <ul class="nav nav-pills">
     <li ng-repeat="idol in idols | filter:search | filter:searchText"
      ng-click="selected.idol = idol"
      ng-class="{active: selected.idol == idol}">
      <a>
       <img class="face icon" ng-src="{{idol.images[0]}}">
      </a>
     </li>
    </ul>

    <h2>表情を選ぶ</h2>

    <div class="tab-content">
     <div class="tab-pane active">
      <span ng-repeat="src in selected.idol.images">
       <img ng-src="{{src}}" alt="" ng-click="selected.index = $index" class="face">
      </span>
     </div>
    </div>
   </section>

   <!-- せりふをつくる -->
   <section>
    <h2>せりふを考える</h2>
    <p><textarea ng-model="serifu" rows=4 cols=60></textarea></p>
   </section>

   <section id="preview">
    <h2>確認する</h2>
    <div class="scenario">
     <div class="paragraph">
      <img ng-src="{{selected.idol.images[selected.index]}}" class=face>
      <div class="fukidashi">
       <p class="name">{{selected.idol.name}}</p>
       <pre class="serifu">{{serifu}}</pre>
      </div>
     </div>
    </div>
    <p><button ng-click="addParagraph()" class="btn btn-default">↓追加↓</button></p>
   </section>

   <section>
    <h2>完成品</h2>
    <form action="/image" method="post">
     <div class="scenario">
      <div class="paragraph" ng-repeat="p in scenario.paragraphs">
       <img ng-src="{{p.image}}" class=face>
       <div class="fukidashi">
        <p class="name">{{p.idol.name}}</p>
        <pre class="serifu">{{p.serifu}}</pre>
       </div>
       <input type=hidden name=ids[] value="{{p.idol.id}}">
       <input type=hidden name=images[] value="{{p.imageIndex}}">
       <input type=hidden name=texts[] value="{{p.serifu}}">
      </div>
     </div>
     <p><button type=submit class="btn btn-primary">画像を保存する</button></p>
    </form>
   </section>

  </div>
 </body>
</html>
