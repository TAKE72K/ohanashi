<!DOCTYPE html><!--*- encoding: UTF-8 -*-->
<html lang=ja ng-app="ohanashi">
 <head>
  <meta charset=UTF-8>
  <title>おはなしジェネレーター for アイドルマスターミリオンライブ！</title>
  <meta name="viewport" content="width=device-width, maximum-scale=1.0">
  <link rel=stylesheet href=bootstrap/css/bootstrap.min.css>
  <link rel=stylesheet href=bootstrap/css/bootstrap-theme.min.css>
  <link rel=stylesheet href=hoge.css>
  <script src="lib/angular.min.js"></script>
  <script src="hoge.js"></script>
 </head>
 <body ng-controller=Ctrl>
  <header class="jumbotron">
   <h1>おはなしジェネレーター</h1>
   <p>アイドルマスターミリオンライブ！ のおはなしを作ろう！</p>
   <p class=small>
    お問い合わせは
    <a href="https://twitter.com/furugomu">@furugomu</a>
    へ。
   </p>
  </header>

  <div class="container">
   <section id="select-idol">
    <h2>アイドルを選ぶ</h2>

    <div class="form-inline">
    <span>
     <label><input name=type type=radio ng-model="search.type" value="">All</label>
     <label><input name=type type=radio ng-model="search.type" value="vo">Vo</label>
     <label><input name=type type=radio ng-model="search.type" value="da">Da</label>
     <label><input name=type type=radio ng-model="search.type" value="vi">Vi</label>
     <label><input name=type type=radio ng-model="search.type" value="ex">Ex</label>
    </span>
    <label>
     <input type=search size=20 ng-model="searchText" placeholder="にかいどう" class="form-control">
    </label>
   </div>

    <ul class="nav nav-pills">
     <li ng-repeat="idol in idols | filter:search | filter:searchText"
      ng-click="select(idol)"
      ng-class="{active: selected.idol.id == idol.id}">
      <a>
       <img class="face icon select" ng-src="{{idol.images[0]}}">
      </a>
     </li>
    </ul>

    <h2>表情を選ぶ</h2>

    <div class="tab-content">
     <div class="tab-pane active">
      <span ng-repeat="src in selected.idol.images">
       <img ng-src="{{src}}" alt="" ng-click="selected.imageIndex = $index" class="face select">
      </span>
     </div>
    </div>
   </section>

   <!-- せりふをつくる -->
   <section id="preview">
    <h2>せりふを考える</h2>
    <form ng-submit="addParagraph()">
     <div class="scenario">
      <div class="paragraph">
       <img ng-src="{{selected.idol.images[selected.imageIndex]}}" class=face>
       <div class="fukidashi">
        <p class="name">{{selected.idol.name}}</p>
        <pre class="serifu">{{selected.text}}</pre>
       </div>
      </div>
     </div>
     <p><textarea ng-model="selected.text" rows=2 cols=60></textarea></p>
     <p><button class="btn btn-default">↓追加↓</button></p>
    </form>
   </section>

   <section>
    <h2>プレビュー</h2>
    <p><label><input type=checkbox ng-model="editting">編集モード</label></p>
    <p ng-show="paragraphs.length == 0" class="alert alert-warning">
     スマートフォン等、環境によっては画像を保存できないことがあります。
     長いおはなしを作る前に短いので試してください。
    </p>
    <form action="/image" method="post">
     <div class="scenario">
      <div ng-repeat="p in paragraphs">
       <div class="paragraph">
        <img ng-src="{{p.idol.images[p.imageIndex]}}" class=face>
        <div class="fukidashi">
         <p class="name">{{p.idol.name}}</p>
         <pre class="serifu">{{p.text}}</pre>
        </div>
        <input type=hidden name=ids[] value="{{p.idol.id}}">
        <input type=hidden name=images[] value="{{p.imageIndex}}">
        <input type=hidden name=texts[] value="{{p.text}}">
       </div>
       <div ng-show="editting">
        <button class=btn type=button ng-disabled="$first"
         ng-click="moveup(paragraphs, $index)">↑</button>
        <button class=btn type=button ng-disabled="$last"
         ng-click="movedown(paragraphs, $index)">↓</button>
        <button class="btn btn-danger" type=button
         ng-click="paragraphs.splice($index, 1)">削除</button>
       </div>
      </div>
     </div>
     <p>
      <button type=submit class="btn btn-primary"
       ng-disabled="paragraphs.length == 0">画像を保存する</button>
     </p>
     <p>
      画像内の文字は<a href="http://ipafont.ipa.go.jp/">IPAフォント</a>
      を利用しています。
     </p>
    </form>
   </section>

   <footer>
    <p>
     <a href="https://twitter.com/share" class="twitter-share-button" data-lang="ja">Tweet</a>
     <a href="https://github.com/furugomu/ohanashi">Fork me on GitHub!!!!!!!!!!!!</a>
    </p>
    <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="https://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
   </footer>
  </div>
 </body>
</html>
